---
// Custom Footer for all pages
// On doc pages: includes email capture CTA above the footer
const route = Astro.locals.starlightRoute;
const isSplash = route?.entry?.data?.template === 'splash';
---

<!--
  Doc page email capture â€” COMMENTED OUT until Resend is hooked up and PDF is ready.
  TODO: Restore at launch once Resend integration is complete. â€” Feb 2026
-->
<!--
{!isSplash && (
  <div class="doc-email-capture">
    <h3>Download the Email Marketing Bible as PDF</h3>
    <p>The full 55,000-word guide. Free. Get updates when new chapters drop.</p>
    <form class="doc-capture-form" id="doc-email-form">
      <input type="email" name="email" placeholder="you@company.com" required class="doc-capture-input" />
      <button type="submit" class="doc-capture-btn">Get the PDF</button>
    </form>
    <p class="doc-capture-disclaimer">No spam. Unsubscribe anytime.</p>
    <p class="doc-capture-status" id="doc-form-status"></p>
  </div>
)}
-->

<footer class="emb-footer">
  <div class="emb-footer-inner">
    <div class="emb-footer-left">
      <span class="emb-footer-author">By George Hartley, founder of <a href="https://smartrmail.com" target="_blank" rel="noopener noreferrer">SmartrMail</a> <a href="https://bluethumb.com.au" target="_blank" rel="noopener noreferrer">Bluethumb</a> and <a href="https://obooko.com" target="_blank" rel="noopener noreferrer">Obooko</a></span>
      <span class="emb-footer-mel">Made with ðŸ§¡ in Melbourne</span>
    </div>
    <div class="emb-footer-right">
      <a href="https://x.com/GTHartley" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4l11.733 16h4.444L8.444 4H4z"></path><path d="M4 20l6.768-6.768M20 4l-6.768 6.768"></path></svg>
      </a>
      <a href="https://github.com/CosmoBlk/email-marketing-bible" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
      </a>
    </div>
  </div>
</footer>

<!-- Doc form script â€” commented out with email capture. Restore with the form above. -->
<!--
{!isSplash && (
  <script is:inline>
    document.getElementById('doc-email-form')?.addEventListener('submit', async (e) => {
      e.preventDefault();
      const form = e.target;
      const email = form.email.value;
      const status = document.getElementById('doc-form-status');
      const btn = form.querySelector('button');
      btn.textContent = 'Sending...';
      btn.disabled = true;
      try {
        const res = await fetch('/api/subscribe', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email }),
        });
        if (res.ok) {
          status.textContent = 'Check your email for the download link!';
          status.style.color = '#ff6b1a';
          form.email.value = '';
          btn.textContent = 'Sent!';
        } else {
          throw new Error('Failed');
        }
      } catch {
        status.textContent = 'Something went wrong. Try again.';
        status.style.color = '#ff4444';
        btn.textContent = 'Get the PDF';
        btn.disabled = false;
      }
    });
  </script>
)}
-->

<style>
  .emb-footer {
    border-top: 1px solid var(--sl-color-hairline-shade, #e5e5e5);
    padding: 3rem 1.5rem;
  }
  .emb-footer-inner {
    max-width: 720px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1.5rem;
  }
  .emb-footer-left {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    font-family: var(--sl-font-mono);
    font-size: 0.85rem;
    color: #888;
  }
  .emb-footer-author a {
    color: #888;
    text-decoration: none;
    transition: color 0.2s;
  }
  .emb-footer-author a:hover {
    color: #ff6b1a;
  }
  .emb-footer-mel {
    font-size: 0.75rem;
    opacity: 0.4;
  }
  .emb-footer-right {
    display: flex;
    align-items: center;
    gap: 1.5rem;
  }
  .emb-footer-right a {
    color: #888;
    text-decoration: none;
    transition: color 0.2s;
  }
  .emb-footer-right a:hover {
    color: #ff6b1a;
  }

  /* Landing page footer stays dark */
  [data-has-hero] .emb-footer {
    border-top-color: #1a1a1a;
  }

  @media (max-width: 768px) {
    .emb-footer-inner {
      flex-direction: column;
      text-align: center;
    }
  }
</style>
